{
  "$id": "LinearSolver.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "linear solver",
  "type" : "object",
  "library" : {
    "type" : "string",
    "description" : "list of (partially) supported linear solver library",
    "enum" : ["julia", "matlab"]
  },
  "verbose" : {"type" : "integer"},
  "method" : {
    "type" : "string",
    "description" : "name of the method used by the solver - depends on the chosen library. if not given a default solver for the library is given"
  },
  "oneOf" : [
    {"properties" :
     {"library" : {"const" : "julia"},
      "description" : "We have the following methods for the julia solvers",
      "method" : {
        "type" : "string",
        "description" : "Different linear solvers are available to solver the system of equations for the battery model. The default method is \"direct\"",
        "enum" : ["direct", "ilu0", "cphi", "cphi_ilu", "cphi_ilu_ilu"],
        "oneOf": [
          {"properties" : {
            "method" : {"const": "direct"},
            "description": "direct solver using LUsolver",
            "options" : {
              "type" : "object",
              "properties" : {
                "max_size" : {
                  "type" : "integer",
                  "description": "maximum system size accepted for LU solver. If size limitation is not respected, then solver returns an error. The default value is 1000000"}
              }
            }
          }},
          {"properties" : {
            "method" : {"const": "ilu0"},
            "description": "iterative solver with ilu preconditioner"}
          },
          {"properties" : {
            "method" : {"const": "cphi"},
            "description": "iterative solver"}
          },
          {"properties" : {
            "method" : {"const": "cphi_ilu"},
            "description": "iterative solver"}
          },
          {"properties" : {
            "method" : {"const": "cphi_ilu_ilu"},
            "description": "iterative solver"}
          }]}}},
    { "properties" : {
      "library" : {"const" : "matlab"}},
      "description" : "We have the following methods for the matlab solver. If no method is given, a direct solver is used",
      "method" : {
        "type" : "string",
        "description" : "linear solver available in matlab interface"
        "enum"  : ["direct", "amg", "amgcl"]
      }
    }]}
